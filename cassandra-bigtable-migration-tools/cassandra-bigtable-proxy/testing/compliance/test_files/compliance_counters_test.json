[
  {
    "title": "Basic Counter and Validation Test",
    "description": "",
    "kind": "dml",
    "operations": [
      {
        "query": "UPDATE bigtabledevinstance.social_posts set likes = likes + ? WHERE user_id = ? AND id = ?",
        "query_type": "UPDATE",
        "params": [
          {
            "value": 0,
            "datatype": "int"
          },
          {
            "value": "user123",
            "datatype": "text"
          },
          {
            "value": 30,
            "datatype": "int"
          }
        ],
        "expected_result": null
      },
      {
        "query": "SELECT user_id, id, likes FROM bigtabledevinstance.social_posts WHERE user_id = ? AND id = ?",
        "query_type": "SELECT",
        "params": [
          {
            "value": "user123",
            "datatype": "text"
          },
          {
            "value": 30,
            "datatype": "int"
          }
        ],
        "expected_result": [
          {
            "user_id": "user123",
            "datatype": "text"
          },
          {
            "id": 30,
            "datatype": "int"
          },
          {
            "likes": 0,
            "datatype": "bigint"
          }
        ]
      },
      {
        "query": "UPDATE bigtabledevinstance.social_posts set likes = likes + ? WHERE user_id = ? AND id = ?",
        "query_type": "UPDATE",
        "params": [
          {
            "value": 2,
            "datatype": "bigint"
          },
          {
            "value": "user123",
            "datatype": "text"
          },
          {
            "value": 30,
            "datatype": "int"
          }
        ],
        "expected_result": null
      },
      {
        "query": "SELECT user_id, id, likes FROM bigtabledevinstance.social_posts WHERE user_id = ? AND id = ?",
        "query_type": "SELECT",
        "query_desc": "likes should be updated to 2",
        "params": [
          {
            "value": "user123",
            "datatype": "text"
          },
          {
            "value": 30,
            "datatype": "int"
          }
        ],
        "expected_result": [
          {
            "user_id": "user123",
            "datatype": "text"
          },
          {
            "id": 30,
            "datatype": "int"
          },
          {
            "likes": 2,
            "datatype": "bigint"
          }
        ]
      }
    ],
    "success_message": "",
    "failure_message": ""
  },
  {
    "title": "Increment a counter with 0",
    "description": "increment counter",
    "kind": "dml",
    "operations": [
      {
        "query": "UPDATE bigtabledevinstance.social_posts set likes = likes + ? WHERE user_id = ? AND id = ?",
        "query_type": "UPDATE",
        "params": [
          {
            "value": 0,
            "datatype": "bigint"
          },
          {
            "value": "userABC",
            "datatype": "text"
          },
          {
            "value": 1,
            "datatype": "int"
          }
        ],
        "expected_result": null
      },
      {
        "query": "SELECT likes FROM bigtabledevinstance.social_posts WHERE user_id = ? AND id = ?",
        "query_type": "SELECT",
        "query_desc": "",
        "params": [
          {
            "value": "userABC",
            "datatype": "text"
          },
          {
            "value": 1,
            "datatype": "int"
          }
        ],
        "expected_result": [
          {
            "likes": 0,
            "datatype": "bigint"
          }
        ]
      }
    ],
    "success_message": "",
    "failure_message": ""
  },
  {
    "title": "Increment a counter",
    "description": "increment counter",
    "kind": "dml",
    "operations": [
      {
        "query": "UPDATE bigtabledevinstance.social_posts set likes = likes + ? WHERE user_id = ? AND id = ?",
        "query_type": "UPDATE",
        "params": [
          {
            "value": 2,
            "datatype": "bigint"
          },
          {
            "value": "userABC",
            "datatype": "text"
          },
          {
            "value": 1,
            "datatype": "int"
          }
        ],
        "expected_result": null
      },
      {
        "query": "UPDATE bigtabledevinstance.social_posts set likes = likes + ? WHERE user_id = ? AND id = ?",
        "query_type": "UPDATE",
        "params": [
          {
            "value": 3,
            "datatype": "bigint"
          },
          {
            "value": "userABC",
            "datatype": "text"
          },
          {
            "value": 1,
            "datatype": "int"
          }
        ],
        "expected_result": null
      },
      {
        "query": "UPDATE bigtabledevinstance.social_posts set likes = likes - ? WHERE user_id = ? AND id = ?",
        "query_type": "UPDATE",
        "params": [
          {
            "value": 1,
            "datatype": "bigint"
          },
          {
            "value": "userABC",
            "datatype": "text"
          },
          {
            "value": 1,
            "datatype": "int"
          }
        ],
        "expected_result": null
      },
      {
        "query": "SELECT likes FROM bigtabledevinstance.social_posts WHERE user_id = ? AND id = ?",
        "query_type": "SELECT",
        "query_desc": "",
        "params": [
          {
            "value": "userABC",
            "datatype": "text"
          },
          {
            "value": 1,
            "datatype": "int"
          }
        ],
        "expected_result": [
          {
            "likes": 4,
            "datatype": "bigint"
          }
        ]
      },
      {
        "query": "UPDATE bigtabledevinstance.social_posts set likes = likes + ? WHERE user_id = ? AND id = ?",
        "query_desc": "add a negative counter value",
        "query_type": "UPDATE",
        "params": [
          {
            "value": -1,
            "datatype": "bigint"
          },
          {
            "value": "userABC",
            "datatype": "text"
          },
          {
            "value": 1,
            "datatype": "int"
          }
        ],
        "expected_result": null
      },
      {
        "query": "SELECT likes FROM bigtabledevinstance.social_posts WHERE user_id = ? AND id = ?",
        "query_type": "SELECT",
        "query_desc": "",
        "params": [
          {
            "value": "userABC",
            "datatype": "text"
          },
          {
            "value": 1,
            "datatype": "int"
          }
        ],
        "expected_result": [
          {
            "likes": 3,
            "datatype": "bigint"
          }
        ]
      }
    ],
    "success_message": "",
    "failure_message": ""
  }
]